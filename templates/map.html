{% extends "base.html" %}
{%- block head -%}
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Map - Friends on map</title>
    <link href="/static/maps.css" rel="stylesheet" media="all">

    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=&sensor=false">
    </script>
    <script type="text/javascript" src="/static/jquery-1.9.1.min.js"></script>
    <script type="text/javascript">
      google.maps.visualRefresh = true;

      var map;
      function initialize() {
        var myLatlng = new google.maps.LatLng({{ location }});
        var mapOptions = {
          center: myLatlng,
          zoom: 3,
          mapTypeId: google.maps.MapTypeId.TERRAIN
        };

        map = new google.maps.Map(document.getElementById("map-canvas"),
            mapOptions);

        var marker = new google.maps.Marker({
          position: myLatlng,
          map: map,
          title:"{{ name }}",
          icon: "{{ photo }}"
        });
      }
google.maps.event.addDomListener(window, 'load', initialize);
    </script>
{%- endblock -%}

{%- block content -%}
<div id="panel">
    <input id="address" type="textbox" value="{{ address }}">
    <input type="button" value="It's right!!!" onclick="codeAddress(&quot;{{ address }}&quot;)">
     <input type="button" value="start" onclick="setAllMap()">
 </div>
  <div id="map-canvas"></div>
<script type="text/javascript">
       $(document).ready(function() {
        $.getJSON("/json", function(json1) {
          $.each(json1, function(key, data) {

            var latLng = new google.maps.LatLng(data.lat, data.lng);
            // Creating a marker and putting it on the map

{#            var infowindow = new google.maps.InfoWindow({#}
{#                content: data.address#}
{#            });#}

            var marker = new google.maps.Marker({
                position: latLng,
                title: data.name
            });
            marker.setMap(map);
          });
        });
      });
</script>
{%- endblock -%}
