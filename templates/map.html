{% extends "base.html" %}
{%- block head -%}
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Map - Friends on map</title>
    <link href="/static/maps.css" rel="stylesheet" media="all">

    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCvlqGS5GcOZ2uLz7LsSdSSL6dFSMSnk8w&sensor=false">
    </script>

    <script type="text/javascript">
      var geocoder;
      var map;
      function initialize() {
        geocoder = new google.maps.Geocoder();
        var myLatlng = new google.maps.LatLng(-34.397, 150.644)
        var mapOptions = {
          center: myLatlng,
          zoom: 3,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        map = new google.maps.Map(document.getElementById("map-canvas"),
            mapOptions);
      };

    function codeAddress() {
       //var address = "{{ address }}";
       var address = document.getElementById("address").value;
       geocoder.geocode( { 'address': address}, function(results, status) {
         if (status == google.maps.GeocoderStatus.OK) {
           map.setCenter(results[0].geometry.location);
             var marker = new google.maps.Marker({
               map: map,
               position: results[0].geometry.location,
               title: "{{ name }}",
               icon: "{{ photo }}"
           });
         } else {
           alert('Geocode was not successful for the following reason: ' + status);
       }
  });
}
google.maps.event.addDomListener(window, 'load', initialize);
    </script>
{%- endblock -%}

{%- block content -%}
<div id="panel">
    <input id="address" type="textbox" value="{{ address }}">
    <input type="button" value="It's right!!!" onclick="codeAddress()">
 </div>
    <div id="map-canvas"></div>
{%- endblock -%}